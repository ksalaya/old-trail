OLD-TRAIL-ROADMAP (canonical)

VISION PILLARS
- Darkly humorous survival sim rooted in historical Oregon Trail grit and hard tradeoffs.
- Dream-West layer: X-files-on-the-frontier omens and curios that stay opt-in when mythic is off.
- Replayable runs via storyteller presets, route forks, faction reputations, and seeded events.
- Embeddable, performant single-file HTML that feels like a living painting viewport.

CURRENT FOUNDATION (ALREADY IMPLEMENTED)
- Single-file Weebly-ready HTML with start flow, save/load, and persistence for logs, stories, and inventories.
- Storyteller presets (Calm, Classic, Chaotic, Harsh) that drive tension curves and pacing gates.
- Hourly simulation with morning/noon/evening/night blocks, travel vs camp macros, guard/camp quality checks, and scene picker.
- Party stats, afflictions, mythic toggles, curios, faction reputation tracking, and trade ledgers.
- Trail log, journal beats, encounter modal system, and B-seed Dream-West hooks already driving events (Open Eye, Men in Gray, mirror wagon, tariffs, peddlers, etc.).

NEXT 3 PASSES
1) Dream-West polish & pacing guardrails (short cycle)
   - Add one-time callbacks for any remaining flagged seeds; enforce >=36h global B-seed spacing and respect mythic toggle.
   - Add concise debug/UX affordance to show when a seed is cooling down or disabled by mode/block.
   - Acceptance: callbacks fire once, log once, and save/load safely without mythic bleed-through.
2) Route cards & travel forecasting
   - Present fork-specific route cards (Sublette vs. Bridger, Three Island vs. south Snake, Columbia raft vs. Barlow) with miles, climate bias, and resupply hints.
   - Journal/log diary lines when a route is chosen; include “you are early/late” schedule nudges at Laramie, South Pass, The Dalles.
   - Acceptance: cards display correct deltas, schedule hints match date bands, and paths update trail/POI data without map errors.
3) Survival meals & condition tuning (scoped first slice)
   - Introduce a handful of authentic recipes (mush & bacon, beans & bacon, trail stew) tied to fuel/time and ration tier.
   - Track simple food group intake (staples/meat/fruit-veg/coffee) for rolling 10–14 day penalties and small morale/condition nudges.
   - Acceptance: recipes consume correct supplies, cook tasks respect camp quality, and malnourishment warnings surface without overwhelming the log.

BACKLOG / DEFERRED
Events & Storyteller
- Expand B-seed roster with regional omens, river variants, and mythic-safety fallbacks; add rare storyteller-specific beats.
- Add late-run event overlays (river cliff scenes, wagon crash, illness crisis) tied to scene picker tags.
Factions & Trade
- Fort-specific price/stock tables (Independence baseline; Kearny/Laramie x2–3; Hall/Boise 4–10x) with tariff/policy flavor.
- Barter/ledger polish: clearer capacity feedback (1,600–2,000 lb safe window) and recurring vendor restock behaviors per fort.
- Add high-value trade goods (blankets, coffee, sugar, tobacco, ammo) that matter in faction encounters.
Survival & Health
- Weather 2.0 per segment: rain/storm/heat/snow tuned to Kansas bottomlands, Platte cholera corridor, South Pass/Blues/Barlow snow windows.
- Stock strain/oxen fatigue score blending heat, grade, mud, and headwind; feeds breakdown and pace penalties.
- Multi-stage illnesses (dysentery/cholera/alkali/frostbite/pneumonia/exhaustion) with diagnosis/treatment hooks and doctoring skill influence.
Social / Pawns
- Schedule grid for delegation (travel/camp/rest/guard) with auto-assignment tweaks and trait-aware job picks.
- Camp crafting jobs (smoke/salt meat, patch gear, craft ammo/herbal tonics) with time/tool costs and cancel/partial-loss handling.
UI / Polish
- Fullscreen toggle and mobile touch spacing; maintain single-file footprint.
- Explorer/map strip polish with painterly terrain tiles, fog/weather overlays, and responsive controls.
- Log clarity: tag filter for events/trade/journal and reduced spam from repeated micro actions.
Audio / Art
- Ambient audio loops (prairie wind, storms, river crossings, night campfire, fort bustle) with lightweight Web Audio sprite system.
- Optional lightning/rain/snow overlay tied to weather events; Bierstadt/Remington/Maggiori-inspired mood palettes per region and block.

UPDATED VISION — DREAM-WEST CORE
- Mythic-only Dream-West baseline: tall tales, omens, and X-files-on-the-frontier weirdness always simmering beneath the grit.
- Dark humor and replayable runs anchored by storyteller pacing, with tension swings and strange curiosities as expected texture.
- Single-file, save-friendly delivery that keeps choices legible even as the world drifts uncanny.

DONE (THIS PASS)
- Mythic encounters always on; toggle removed and saves migrated.
- Narrator UI polish: card detail layout fixed and dropdown duplication hidden.
- Skills scaled to 1–20 with tiered formulas, XP tuning, and migration.
- Party generation refreshed with expanded names, varied trait counts/mix, age-aware skills, and better randomness.
- Trait hover tooltips added across draft and in-run views.

NEXT / DEFERRED
- Rapid-fire seed events pack (B-set filler beats) with hard cooldowns.
- Tier B big setpieces (B-01..B-05 etc.).
- Remaining chain followups: EX-01..EX-10, H-01/H-02/H-04/H-05/H-07, S-01/S-05/S-06/S-08, mythic M-01/M-02/M-05/M-08.
- Deeper faction politics arcs (rival forts, Open Eye Revival cult, Men in Gray full arc).
- Wire Open Eye / Men in Gray rep into trade modifiers + UI surfacing.
- Fill remaining Dream-West B-set seeds/callbacks with region variants and tuned tension.
- Extend Open Eye into later-tier confrontations/aid (escort/delivery) once chains support it.
- Full mental-break/meltdown loop tied to morale/stress (multi-state, escalating).
- Deeper multi-step mythic questlines across regions/days with callbacks.
- Recurring NPC caravans/factions over time (return visits, remembered favors/grudges).
- Event overlap/queue rules to avoid conflicting incidents in same block.
- Expanded storyteller roster/weirdness slider UI + pacing rules.
- Broader social arc varieties (long rivalries/romance/campfire followups) with trait-driven hooks.

Deferred after B-Set Filler + B-01 Setpiece pass
- Build remaining Tier B setpieces (B-02..B-05) with follow-up callbacks and matching 10-day cooldown pacing.
- Add further Dream-West B-set filler beats and regional variants, including follow-ups for flags like seed_b16_mailbag_kept and seed_b19_mirror_mark.

DreamWest follow-ups
- Expand DreamWest effect interpreter to support the full README spec (all effect keys) with thorough clamping and safety.
- Integrate DreamWest items/curios into trading posts/fort vendors and inventory UI (pricing, rarity, restrictions).
- Add DreamWest trait/affliction injection to pawn system (including staged progression and cures) using existing illness patterns.
- Add lightweight debug panel for events (recent events, dw cooldown keys, lastAny hour) for balancing.
- Optional hosted JSON fetch + caching while keeping embedded fallback for Weebly reliability.
- Add optional scene/viewport flavor hooks (subtle captions/overlays) when DreamWest beats trigger, without requiring new art assets.

BYTE-BUDGET PASSES
- Byte-budget pass (Weebly-safe) — baseline: 1,225,146 bytes — after: 998,287 bytes (saved 226,859 bytes) — target: <1,000,000

QA / Regression checklists (moved out of HTML to save bytes)
Validation checklist (Explorer view updates)
- Start new run → go to Travel → toggle Explorer.
- Explorer canvas spans full embed width; layout doesn’t break Journal view.
- Canvas resizes sharply when toggling views and when resizing the browser (no blur).
- Tile images load progressively; if they fail, fallback colors still render.
- Oxen count changes wagon team visuals (try buying/selling oxen); clamp works.
- No new trail log spam during rendering.
- Save/load still works (best effort).
- Any “mythic/secret” content never appears in normal logs/events as a side effect.

Validation checklist (Fort ledger scarcity pass):
- Start a new run; no console errors.
- Enter travel phase and approach a fort; “Trading Post” button appears; modal opens/closes cleanly.
- Buy/sell works; vendor stock decreases/increases; buy buttons disable when stock is insufficient.
- Prices shift reasonably with scarcity (never negative/NaN; multipliers clamped).
- Wait/advance 2–3 days and reopen trade; stock restocks toward caps (no duplication explosions).
- Save + reload mid-run; trade modal still works; vendor inventories persist; no crashes.
- Trail log remains clean (no spam per transaction); trade history shows in the trade ledger panel.
- Mythic OFF: nothing new leaks into Men in Gray behaviors (this pass should not add mythic triggers at all).

Validation checklist (Barter tab):
- Start new run; no console errors.
- Reach a fort and open Trade; Buy/Sell tabs still function and haggle offers spend attempts.
- Switch to Barter tab; Offer/Request bundles update totals; Clear empties baskets.
- Propose Barter consumes a haggle attempt, applies accepted/countered trades without negative stocks or dupes, and refuses cleanly.
- Haggle attempts exhausted disables proposing; panel explains remaining attempts.
- Trade ledger shows “Barter — …” lines; no trail log spam.
- Save/reload mid-run; trade modal and barter baskets open without crashes.

Validation checklist (Dream-West B11/B12/B13 seeds):
- Start new run; no console errors.
- Fast-forward 5–10 days; B-11/B-12/B-13 seeds surface with seed_lastHour + seed_b_global_time + per-seed cooldown spacing.
- B-11 follow-up triggers once after dispute/forge at a fort or mission; clears pending flags; no repeats.
- B-13 follow-up triggers once at a fort/mission before deadline; clears pending flags; no repeats.
- Mythic OFF: no new mythic-only triggers were added; Men in Gray behaviors unchanged.
- Save + reload mid-run; ledger still renders and events function without crashes.
- Trail log: one line per seed run; smaller beats stay in pawn thoughts (no spam).

Validation checklist (Chaotic narrator + Dream-West callbacks):
- New run loads with no console errors.
- “Chaotic Narrator” appears, is selectable, and persists after reloads.
- Fast-forward 10+ days (mythic ON): Men in Gray offer can occur; resonance callback fires once (>=24h later) and never repeats.
- Mirror Wagon seed can occur; echo callback fires once (>=48h later) and never repeats.
- Global B-seed pacing holds (>=36h between B-seeds/callbacks).
- Mythic OFF: Men in Gray callback never triggers; Mirror echo stays mundane and never grants curios.
- Trail log stays lean: one meaningful log per new event path (plus curio gain log when applicable).

Validation checklist (mythic-only + 1–20 skills + narrator UI):
- Start a new run: start screen loads; no console errors.
- Mythic toggle is gone; mythic content is always enabled; old saves with mythicOff load and are forced mythicOn.
- Narrator selection appears only once via cards; hover detail text reads at normal width; selection persists into play/save.
- Party rerolls show skills on a 1–20 scale with noticeable variation; 3 traits are most common but not guaranteed.
- Younger characters generally roll lower baselines and fewer frailty traits; older characters can show higher skills and health quirks.
- Trait hover tooltips display clear summaries in draft and in-run views.
- Fast-forward several days/hours: task odds remain sane on the new scale; no trail log spam from skill-ups.
- Save/load mid-run works without crashing (best-effort).

Validation checklist (B-set filler + B-01 + trade header):
- Start a new run; fast-forward multiple days; confirm seeds appear but do not spam.
- Confirm B-set global cooldown + per-seed cooldown works (no B-seed inside 36h; no same seed inside 7d).
- Trigger B-01 only once per ~10 days mid-run; follow-up fires once 24–96h later and resolves.
- Ensure no JS errors; encounter modal closes; trail log shows one meaningful line per event.
- Open a trade modal (fort/caravan/open_eye) and see Standing + Terms in the header without layout break.
- Save/load smoke test if available: old saves still load without crashes.

Validation checklist (DreamWest pack + mythic-always-on):
- Start a new run: no console errors, no Mythic toggle anywhere.
- Fast-forward 5–10 in-game days: DreamWest events appear but do not cluster; cooldowns respected.
- Confirm core (non-DreamWest) events still trigger normally.
- Save/reload mid-run: no crashes; DreamWest cooldown flags persist.
- Confirm no “mythic off” branches exist (quick grep for mythicEnabled checks; should be removed or forced true).

Future byte-budget pipeline
- Proper build pipeline: bundle → minify (terser) → entropy pack (roadroller) → inline to single HTML.
- JSON/data packing: LZ-string / heatshrink style packed chunks + tiny decoder; lazy-inflate by feature on first use.
- Asset pipeline: single atlas; AVIF/WebP primary + PNG fallback; SVG subset/minify.
- Audio footprint reduction: multiplex SFX via a tracker/music engine; avoid multiple players; consider tiny ADPCM spritemap.
- Optional: rename CSS classes/ids via a mapping pass (only if truly needed for bytes).
